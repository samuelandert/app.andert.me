import{s as le,n as te}from"../chunks/scheduler.ffc83710.js";import{S as ue,i as ce,g as P,m as J,h as S,j as I,n as x,f as R,a as W,x as _,y as _e,o as fe,s as F,r as ge,z as re,c as M,u as ye,k as y,v as Oe,d as Ae,t as Re,A as Te,w as be}from"../chunks/index.ddb4c010.js";function ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Pe(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var de={},H={},he={},$={},ve={},K={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OBJECT=t.isUndefined=t.isFunction=t.UNDEFINED=t.noop=void 0;const e=()=>{};t.noop=e,t.UNDEFINED=(0,t.noop)();const r=s=>typeof s=="function";t.isFunction=r;const n=s=>s===t.UNDEFINED;t.isUndefined=n,t.OBJECT=Object})(K);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.stableHash=void 0;const e=K,r=new WeakMap;let n=0;const s=o=>{const i=typeof o,l=o&&o.constructor,c=l==Date;let a,u;if((0,e.OBJECT)(o)===o&&!c&&l!=RegExp){if(a=r.get(o),a)return a;if(a=++n+"~",r.set(o,a),l==Array){for(a="@",u=0;u<o.length;u++)a+=(0,t.stableHash)(o[u])+",";r.set(o,a)}if(l==e.OBJECT){a="#";const f=e.OBJECT.keys(o).sort();for(;!(0,e.isUndefined)(u=f.pop());)(0,e.isUndefined)(o[u])||(a+=u+":"+(0,t.stableHash)(o[u])+",");r.set(o,a)}}else a=c?o.toJSON():i=="symbol"?o.toString():i=="string"?JSON.stringify(o):""+o;return a};t.stableHash=s})(ve);Object.defineProperty($,"__esModule",{value:!0});$.serialize=void 0;const Se=ve,Ne=K,Ce=t=>Ie(t)[0];$.serialize=Ce;const Ie=t=>{if((0,Ne.isFunction)(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?(0,Se.stableHash)(t):"",[t,e]};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=$;Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}})})(he);/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Ue=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),De=Object.prototype.hasOwnProperty;function B(t,e){return De.call(t,e)}function Q(t){if(Array.isArray(t)){for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=""+r;return e}if(Object.keys)return Object.keys(t);var n=[];for(var s in t)B(t,s)&&n.push(s);return n}function E(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function q(t){for(var e=0,r=t.length,n;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function A(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function X(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function G(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,r=t.length;e<r;e++)if(G(t[e]))return!0}else if(typeof t=="object"){for(var n=Q(t),s=n.length,o=0;o<s;o++)if(G(t[n[o]]))return!0}}return!1}function se(t,e){var r=[t];for(var n in e){var s=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof s<"u"&&r.push(n+": "+s)}return r.join(`
`)}var Y=function(t){Ue(e,t);function e(r,n,s,o,i){var l=this.constructor,c=t.call(this,se(r,{name:n,index:s,operation:o,tree:i}))||this;return c.name=n,c.index=s,c.operation=o,c.tree=i,Object.setPrototypeOf(c,l.prototype),c.message=se(r,{name:n,index:s,operation:o,tree:i}),c}return e}(Error),w=Y,Le=E,N={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){var n=U(r,this.path);n&&(n=E(n));var s=T(r,{op:"remove",path:this.from}).removed;return T(r,{op:"add",path:this.path,value:s}),{newDocument:r,removed:n}},copy:function(t,e,r){var n=U(r,this.from);return T(r,{op:"add",path:this.path,value:E(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:C(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}},He={add:function(t,e,r){return q(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:N.move,copy:N.copy,test:N.test,_get:N._get};function U(t,e){if(e=="")return t;var r={op:"_get",path:e};return T(t,r),r.value}function T(t,e,r,n,s,o){if(r===void 0&&(r=!1),n===void 0&&(n=!0),s===void 0&&(s=!0),o===void 0&&(o=0),r&&(typeof r=="function"?r(e,0,t,e.path):D(e,0)),e.path===""){var i={newDocument:t};if(e.op==="add")return i.newDocument=e.value,i;if(e.op==="replace")return i.newDocument=e.value,i.removed=t,i;if(e.op==="move"||e.op==="copy")return i.newDocument=U(t,e.from),e.op==="move"&&(i.removed=t),i;if(e.op==="test"){if(i.test=C(t,e.value),i.test===!1)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return i.newDocument=t,i}else{if(e.op==="remove")return i.removed=t,i.newDocument=null,i;if(e.op==="_get")return e.value=t,i;if(r)throw new w("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return i}}else{n||(t=E(t));var l=e.path||"",c=l.split("/"),a=t,u=1,f=c.length,m=void 0,d=void 0,h=void 0;for(typeof r=="function"?h=r:h=D;;){if(d=c[u],d&&d.indexOf("~")!=-1&&(d=X(d)),s&&(d=="__proto__"||d=="prototype"&&u>0&&c[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&m===void 0&&(a[d]===void 0?m=c.slice(0,u).join("/"):u==f-1&&(m=e.path),m!==void 0&&h(e,0,t,m)),u++,Array.isArray(a)){if(d==="-")d=a.length;else{if(r&&!q(d))throw new w("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);q(d)&&(d=~~d)}if(u>=f){if(r&&e.op==="add"&&d>a.length)throw new w("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);var i=He[e.op].call(e,a,d,t);if(i.test===!1)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return i}}else if(u>=f){var i=N[e.op].call(e,a,d,t);if(i.test===!1)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return i}if(a=a[d],r&&u<f&&(!a||typeof a!="object"))throw new w("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,t)}}}function z(t,e,r,n,s){if(n===void 0&&(n=!0),s===void 0&&(s=!0),r&&!Array.isArray(e))throw new w("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=E(t));for(var o=new Array(e.length),i=0,l=e.length;i<l;i++)o[i]=T(t,e[i],r,!0,s,i),t=o[i].newDocument;return o.newDocument=t,o}function pe(t,e,r){var n=T(t,e);if(n.test===!1)throw new w("Test operation failed","TEST_OPERATION_FAILED",r,e,t);return n.newDocument}function D(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new w("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(N[t.op]){if(typeof t.path!="string")throw new w("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new w('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new w("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new w("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&G(t.value))throw new w("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var s=t.path.split("/").length,o=n.split("/").length;if(s!==o+1&&s!==o)throw new w("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new w("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var i={op:"_get",path:t.from,value:void 0},l=V([i],r);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new w("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new w("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function V(t,e,r){try{if(!Array.isArray(t))throw new w("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)z(E(e),E(t),r||!0);else{r=r||D;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(s){if(s instanceof w)return s;throw s}}function C(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),s,o,i;if(r&&n){if(o=t.length,o!=e.length)return!1;for(s=o;s--!==0;)if(!C(t[s],e[s]))return!1;return!0}if(r!=n)return!1;var l=Object.keys(t);if(o=l.length,o!==Object.keys(e).length)return!1;for(s=o;s--!==0;)if(!e.hasOwnProperty(l[s]))return!1;for(s=o;s--!==0;)if(i=l[s],!C(t[i],e[i]))return!1;return!0}return t!==t&&e!==e}const $e=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:w,_areEquals:C,applyOperation:T,applyPatch:z,applyReducer:pe,deepClone:Le,getValueByPointer:U,validate:V,validator:D},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Z=new WeakMap,ze=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),je=function(){function t(e,r){this.callback=e,this.observer=r}return t}();function Fe(t){return Z.get(t)}function Me(t,e){return t.observers.get(e)}function Je(t,e){t.observers.delete(e.callback)}function we(t,e){e.unobserve()}function me(t,e){var r=[],n,s=Fe(t);if(!s)s=new ze(t),Z.set(t,s);else{var o=Me(s,e);n=o&&o.observer}if(n)return n;if(n={},s.value=E(t),e){n.callback=e,n.next=null;var i=function(){L(n)},l=function(){clearTimeout(n.next),n.next=setTimeout(i)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return n.patches=r,n.object=t,n.unobserve=function(){L(n),clearTimeout(n.next),Je(s,n),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},s.observers.set(e,new je(e,n)),n}function L(t,e){e===void 0&&(e=!1);var r=Z.get(t.object);k(r.value,t.object,t.patches,"",e),t.patches.length&&z(r.value,t.patches);var n=t.patches;return n.length>0&&(t.patches=[],t.callback&&t.callback(n)),n}function k(t,e,r,n,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=Q(e),i=Q(t),l=!1,c=i.length-1;c>=0;c--){var a=i[c],u=t[a];if(B(e,a)&&!(e[a]===void 0&&u!==void 0&&Array.isArray(e)===!1)){var f=e[a];typeof u=="object"&&u!=null&&typeof f=="object"&&f!=null&&Array.isArray(u)===Array.isArray(f)?k(u,f,r,n+"/"+A(a),s):u!==f&&(s&&r.push({op:"test",path:n+"/"+A(a),value:E(u)}),r.push({op:"replace",path:n+"/"+A(a),value:E(f)}))}else Array.isArray(t)===Array.isArray(e)?(s&&r.push({op:"test",path:n+"/"+A(a),value:E(u)}),r.push({op:"remove",path:n+"/"+A(a)}),l=!0):(s&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}))}if(!(!l&&o.length==i.length))for(var c=0;c<o.length;c++){var a=o[c];!B(t,a)&&e[a]!==void 0&&r.push({op:"add",path:n+"/"+A(a),value:E(e[a])})}}}function Ee(t,e,r){r===void 0&&(r=!1);var n=[];return k(t,e,n,"",r),n}const xe=Object.freeze(Object.defineProperty({__proto__:null,compare:Ee,generate:L,observe:me,unobserve:we},Symbol.toStringTag,{value:"Module"})),Be=Object.assign({},$e,xe,{JsonPatchError:Y,deepClone:E,escapePathComponent:A,unescapePathComponent:X}),Qe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Y,_areEquals:C,applyOperation:T,applyPatch:z,applyReducer:pe,compare:Ee,deepClone:E,default:Be,escapePathComponent:A,generate:L,getValueByPointer:U,observe:me,unescapePathComponent:X,unobserve:we,validate:V,validator:D},Symbol.toStringTag,{value:"Module"})),qe=Pe(Qe);var ee={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InputValidationError=t.ResponseError=t.getHttpResponseError=t.InternalError=t.AuthorizationError=t.OperationError=void 0;class e extends Error{constructor(a){var u,f,m;const d=(u=a==null?void 0:a.message)!==null&&u!==void 0?u:"Operation error",h=(a==null?void 0:a.cause)!==void 0?a.cause:void 0;super(d,{cause:h}),this.code=(f=a==null?void 0:a.code)!==null&&f!==void 0?f:"OperationError",this.statusCode=(m=a==null?void 0:a.statusCode)!==null&&m!==void 0?m:500,this.name=this.constructor.name}toJSON(){return{code:this.code,message:this===null||this===void 0?void 0:this.message}}}t.OperationError=e;class r extends e{constructor(a){var u;super({message:(u=a==null?void 0:a.message)!==null&&u!==void 0?u:"Not authorized",code:"AuthorizationError",statusCode:401,cause:a==null?void 0:a.cause})}}t.AuthorizationError=r;class n extends e{constructor(a){super({message:a==null?void 0:a.message,code:"InternalError",statusCode:500,cause:a==null?void 0:a.cause})}}t.InternalError=n;const s=c=>{var a,u;const f=c==null?void 0:c.extensions;if(f)return{statusCode:(a=f.http)===null||a===void 0?void 0:a.status,headers:(u=f.http)===null||u===void 0?void 0:u.headers,text:f.responseText}},o=c=>{var a;if(c instanceof i)return(0,t.getHttpResponseError)((a=c.errors)!==null&&a!==void 0?a:[]);if(Array.isArray(c)){for(const u of c){const f=s(u);if(f)return f}return}return s(c)};t.getHttpResponseError=o;class i extends e{constructor(a){var u,f;super({message:(u=a.message)!==null&&u!==void 0?u:"Response is not OK",code:(f=a.code)!==null&&f!==void 0?f:"ResponseError",cause:a.cause,statusCode:a.statusCode}),this.errors=a.errors}}t.ResponseError=i;class l extends i{constructor(a){var u;super({code:"InputValidationError",message:(u=a.message)!==null&&u!==void 0?u:"Validation error",statusCode:a.statusCode,cause:a.cause}),this.errors=a.errors}}t.InputValidationError=l})(ee);Object.defineProperty(H,"__esModule",{value:!0});H.Client=void 0;const Ge=he,oe=qe,O=ee;class We{constructor(e){var r;this.options=e,this.baseHeaders={},this.extraHeaders={},this.csrfEnabled=!0,this.baseHeaders=e.sdkVersion?{"WG-SDK-Version":e.sdkVersion}:{},this.extraHeaders={...e.extraHeaders},this.csrfEnabled=(r=e.csrfEnabled)!==null&&r!==void 0?r:!0}static buildCacheKey(e){return(0,Ge.serialize)(e)}isAuthenticatedOperation(e){var r,n;return!!(!((n=(r=this.options.operationMetadata)===null||r===void 0?void 0:r[e])===null||n===void 0)&&n.requiresAuthentication)}operationUrl(e){return this.options.baseURL+"/operations/"+e}addUrlParams(e,r){r.sort();const n=this.encodeQueryParams(r);return e+(n?`?${n}`:"")}encodeQueryParams(e){const n=e.toString().replace("=&","&");return n.endsWith("=")?n.slice(0,-1):n}searchParams(e){const r=new URLSearchParams(e);return this.options.applicationHash&&r.set("wg_api_hash",this.options.applicationHash),r}async fetchJson(e,r={}){return r.headers={...r.headers,Accept:"application/json","Content-Type":"application/json"},this.fetch(e,r)}async fetch(e,r={}){const n=this.options.customFetch||globalThis.fetch;r.headers={...this.baseHeaders,...this.extraHeaders,...r.headers};let s;if(!r.signal&&this.options.requestTimeoutMs&&this.options.requestTimeoutMs>0){const o=new AbortController;s=setTimeout(()=>o.abort(),this.options.requestTimeoutMs),r.signal=o.signal}try{return await n(e,{credentials:"include",mode:"cors",...r})}finally{s&&clearTimeout(s)}}convertGraphQLResponse(e,r=200){var n,s;return e.errors&&e.errors.length?{error:new O.ResponseError({statusCode:r,code:(n=e.errors[0])===null||n===void 0?void 0:n.code,message:(s=e.errors[0])===null||s===void 0?void 0:s.message,errors:e.errors})}:e.data===void 0?{error:new O.ResponseError({code:"ResponseError",statusCode:r,message:"Server returned no data"})}:{data:e.data}}async handleClientResponseError(e){var r,n,s;if(e.status===401)return new O.AuthorizationError;const o=await e.text();try{const i=JSON.parse(o);if(e.status===400&&(i==null?void 0:i.code)==="InputValidationError"){const l=i;return new O.InputValidationError({errors:l.errors,message:l.message,statusCode:e.status})}return new O.ResponseError({code:(r=i.errors[0])===null||r===void 0?void 0:r.code,statusCode:e.status,errors:i.errors,message:(s=(n=i.errors[0])===null||n===void 0?void 0:n.message)!==null&&s!==void 0?s:"Invalid response from server"})}catch(i){return new O.ResponseError({cause:i,statusCode:e.status,message:o||"Invalid response from server"})}}async fetchResponseToClientResponse(e){if(!e.ok)return{error:await this.handleClientResponseError(e)};const r=await e.json();return this.convertGraphQLResponse({data:r.data,errors:r.errors},e.status)}stringifyInput(e){const r=JSON.stringify(e||{});return r==="{}"?void 0:r}setExtraHeaders(e){this.extraHeaders={...this.extraHeaders,...e}}hasExtraHeaders(){return Object.keys(this.extraHeaders).length>0}setAuthorizationToken(e){this.setExtraHeaders({Authorization:`Bearer ${e}`})}unsetAuthorization(){delete this.extraHeaders.Authorization}async query(e){const r=this.searchParams(),n=this.stringifyInput(e.input);n&&r.set("wg_variables",n),e.subscribeOnce&&r.set("wg_subscribe_once","");const s=this.addUrlParams(this.operationUrl(e.operationName),r),o=await this.fetchJson(s,{method:"GET",signal:e.abortSignal});return this.fetchResponseToClientResponse(o)}async getCSRFToken(){if(!this.csrfToken){const e=await this.fetch(`${this.options.baseURL}/auth/cookie/csrf`,{headers:{...this.baseHeaders,Accept:"text/plain"}});if(this.csrfToken=await e.text(),!this.csrfToken)throw new Error("Failed to get CSRF token. Please make sure you are authenticated.")}return this.csrfToken}async mutate(e){const r=this.searchParams(),n=this.addUrlParams(this.operationUrl(e.operationName),r),s={};this.isAuthenticatedOperation(e.operationName)&&this.csrfEnabled&&(s["X-CSRF-Token"]=await this.getCSRFToken());const o=await this.fetchJson(n,{method:"POST",signal:e.abortSignal,body:this.stringifyInput(e.input),headers:s});return this.fetchResponseToClientResponse(o)}async fetchUser(e){const r=this.searchParams();e!=null&&e.revalidate&&r.set("revalidate","");const n=await this.fetchJson(this.addUrlParams(`${this.options.baseURL}/auth/user`,r),{method:"GET",signal:e==null?void 0:e.abortSignal});if(!n.ok)throw await this.handleClientResponseError(n);return n.json()}async subscribe(e,r){if(e.subscribeOnce){const o=await this.query(e);return r==null||r(o),o}const n=this.options.forceSSE||!this.hasExtraHeaders();if(r&&"EventSource"in globalThis&&n)return this.subscribeWithSSE(e,r);const s=this.subscribeWithFetch(e);if(r){for await(const o of s)r(o);return}return s}subscribeWithSSE(e,r){return new Promise((n,s)=>{const o=this.searchParams({wg_sse:"",wg_json_patch:""}),i=this.stringifyInput(e.input);i&&o.set("wg_variables",i),e.liveQuery&&o.set("wg_live","");const l=this.addUrlParams(this.operationUrl(e.operationName),o),c=new EventSource(l,{withCredentials:!0});c.addEventListener("error",()=>{s(new Error(`SSE connection error: ${e.operationName}`))}),c.addEventListener("open",()=>{n()});let a=null;c.addEventListener("message",u=>{if(u.data==="done"){c.close();return}const f=JSON.parse(u.data);a!==null&&Array.isArray(f)?a=(0,oe.applyPatch)(a,f,!0,!1,!0).newDocument:a=f;const m=this.convertGraphQLResponse(a);r(m)}),e!=null&&e.abortSignal&&(e==null||e.abortSignal.addEventListener("abort",()=>c.close()))})}async fetchSubscription(e){const r=this.searchParams(),n=this.stringifyInput(e.input);n&&r.set("wg_variables",n),e.liveQuery&&r.set("wg_live","");const s=this.addUrlParams(this.operationUrl(e.operationName),r);return await this.fetchJson(s,{method:"GET",signal:e.abortSignal})}async*subscribeWithFetch(e){const r=await this.fetchSubscription(e);if(!r.ok||r.body===null){yield{error:new O.ResponseError({code:"ResponseError",message:`Response is not ok. Failed to subscribe to '${e.operationName}'`,statusCode:r.status})};return}const n=r.body.getReader(),s=new TextDecoder;let o="",i=null;for(;;){const{value:l,done:c}=await n.read();if(c)return;if(l&&(o+=s.decode(l),o.endsWith(`

`))){const a=JSON.parse(o.substring(0,o.length-2));i!==null&&Array.isArray(a)?i=(0,oe.applyPatch)(i,a).newDocument:i=a,yield this.convertGraphQLResponse(i,r.status),o=""}}}async uploadFiles(e,r){var n;this.validateFiles(e,r);const s=new FormData;for(const[u,f]of Object.entries(e.files))f instanceof Blob&&s.append("files",f);const o={};this.csrfEnabled&&(!((n=r==null?void 0:r.requireAuthentication)!==null&&n!==void 0)||n)&&(o["X-CSRF-Token"]=await this.getCSRFToken());const i=this.searchParams();"profile"in e&&(o["X-Upload-Profile"]=e.profile),"meta"in e&&(o["X-Metadata"]=e.meta?JSON.stringify(e.meta):"");const l=await this.fetch(this.addUrlParams(`${this.options.baseURL}/s3/${e.provider}/upload`,i),{headers:o,body:s,method:"POST",signal:e.abortSignal});if(!l.ok)throw await this.handleClientResponseError(l);const c=await l.json();if(!c.length)throw new O.ResponseError({code:"ResponseError",message:`Invalid server response shape. Failed to upload files to '${e.provider}' provider`,statusCode:l.status});return{fileKeys:c.map(u=>u.key)}}validateFiles(e,r){if(r!=null&&r.maxAllowedFiles&&e.files.length>r.maxAllowedFiles)throw new Error(`uploading ${e.files.length} exceeds the maximum allowed (${r.maxAllowedFiles})`);for(const n of e.files){if(r!=null&&r.maxAllowedUploadSizeBytes&&n.size>r.maxAllowedUploadSizeBytes)throw new Error(`file ${n.name} with size ${n.size} exceeds the maximum allowed (${r.maxAllowedUploadSizeBytes})`);if(r!=null&&r.allowedFileExtensions&&n.name.includes(".")){const s=n.name.substring(n.name.indexOf(".")+1).toLowerCase();if(s&&r.allowedFileExtensions.findIndex(o=>o.toLocaleLowerCase())<0)throw new Error(`file ${n.name} with extension ${s} is not allowed`)}if(r!=null&&r.allowedMimeTypes){const s=n.type;if(r.allowedMimeTypes.findIndex(i=>i==s?!0:s.match(new RegExp(i.replace("*",".*"))))<0)throw new Error(`file ${n.name} with MIME type ${s} is not allowed`)}}}login(e,r){if(typeof window>"u")throw new Error("login() can only be called in a browser environment");const n=new URLSearchParams({redirect_uri:r||window.location.toString()}),s=this.addUrlParams(`${this.options.baseURL}/auth/cookie/authorize/${e}`,n);window.location.assign(s)}async logout(e){var r;if(typeof window>"u")throw new Error("logout() can only be called in a browser environment");const n=new URLSearchParams({logout_openid_connect_provider:e!=null&&e.logoutOpenidConnectProvider?"true":"false"}),s=this.addUrlParams(`${this.options.baseURL}/auth/cookie/user/logout`,n),o=await this.fetch(s,{method:"GET"});if(!o.ok)return!1;let i=!0;if(!((r=o.headers.get("Content-Type"))===null||r===void 0)&&r.includes("application/json")){const l=await o.json();l.redirect&&(e!=null&&e.redirect?i=await e.redirect(l.redirect):window.location.href=l.redirect)}return i&&(e!=null&&e.after)&&e.after(),i}}H.Client=We;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getHttpResponseError=t.InputValidationError=t.AuthorizationError=t.ResponseError=t.OperationError=t.Client=void 0;var e=H;Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return e.Client}});var r=ee;Object.defineProperty(t,"OperationError",{enumerable:!0,get:function(){return r.OperationError}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(t,"AuthorizationError",{enumerable:!0,get:function(){return r.AuthorizationError}}),Object.defineProperty(t,"InputValidationError",{enumerable:!0,get:function(){return r.InputValidationError}}),Object.defineProperty(t,"getHttpResponseError",{enumerable:!0,get:function(){return r.getHttpResponseError}})})(de);const Ke={applicationHash:"f4ad807d",baseURL:"http://localhost:9991",sdkVersion:"0.163.3"},Xe={Countries:{requiresAuthentication:!1}};class Ye extends de.Client{query(e){return super.query(e)}mutate(e){return super.mutate(e)}subscribe(e,r){return super.subscribe(e,r)}login(e,r){return super.login(e,r)}async fetchUser(e){return super.fetchUser(e)}}const Ve=t=>new Ye({...Ke,...t,operationMetadata:Xe,csrfEnabled:!1}),Ze=Ve(),ke=async()=>{const t=await Ze.query({operationName:"Countries",input:{code:"DE"}});if(t!=null&&t.error)throw t.error;return(t==null?void 0:t.data)??Error("No Data")},it=Object.freeze(Object.defineProperty({__proto__:null,load:ke},Symbol.toStringTag,{value:"Module"}));function et(t){let e,r,n,s,o;return{c(){e=P("button"),r=J("clicks: "),n=J(t[0])},l(i){e=S(i,"BUTTON",{});var l=I(e);r=x(l,"clicks: "),n=x(l,t[0]),l.forEach(R)},m(i,l){W(i,e,l),_(e,r),_(e,n),s||(o=_e(e,"click",t[1]),s=!0)},p(i,[l]){l&1&&fe(n,i[0])},i:te,o:te,d(i){i&&R(e),s=!1,o()}}}function tt(t,e,r){let n=0;function s(){r(0,n+=1)}return[n,s]}class rt extends ue{constructor(e){super(),ce(this,e,tt,et,le,{})}}function ae(t,e,r){const n=t.slice();return n[1]=e[r],n}function ie(t){let e,r=t[1].name+"",n;return{c(){e=P("div"),n=J(r)},l(s){e=S(s,"DIV",{});var o=I(e);n=x(o,r),o.forEach(R)},m(s,o){W(s,e,o),_(e,n)},p(s,o){o&1&&r!==(r=s[1].name+"")&&fe(n,r)},d(s){s&&R(e)}}}function nt(t){let e,r,n,s="Welcome",o,i,l,c="Call to Action",a,u,f,m,d=ne(t[0].countries_countries??[]),h=[];for(let v=0;v<d.length;v+=1)h[v]=ie(ae(t,d,v));return f=new rt({}),{c(){e=P("div"),r=P("div"),n=P("h2"),n.textContent=s,o=F(),i=P("div"),l=P("a"),l.textContent=c,a=F();for(let v=0;v<h.length;v+=1)h[v].c();u=F(),ge(f.$$.fragment),this.h()},l(v){e=S(v,"DIV",{class:!0});var b=I(e);r=S(b,"DIV",{class:!0});var p=I(r);n=S(p,"H2",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-1tt1zhz"&&(n.textContent=s),o=M(p),i=S(p,"DIV",{class:!0});var g=I(i);l=S(g,"A",{class:!0,href:!0,target:!0,rel:!0,"data-svelte-h":!0}),re(l)!=="svelte-59s816"&&(l.textContent=c),a=M(g);for(let j=0;j<h.length;j+=1)h[j].l(g);u=M(g),ye(f.$$.fragment,g),g.forEach(R),p.forEach(R),b.forEach(R),this.h()},h(){y(n,"class","h2"),y(l,"class","btn variant-filled"),y(l,"href","https://skeleton.dev/"),y(l,"target","_blank"),y(l,"rel","noreferrer"),y(i,"class","flex justify-center space-x-2"),y(r,"class","space-y-10 text-center flex flex-col items-center"),y(e,"class","container h-full mx-auto flex justify-center items-center")},m(v,b){W(v,e,b),_(e,r),_(r,n),_(r,o),_(r,i),_(i,l),_(i,a);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(i,null);_(i,u),Oe(f,i,null),m=!0},p(v,[b]){if(b&1){d=ne(v[0].countries_countries??[]);let p;for(p=0;p<d.length;p+=1){const g=ae(v,d,p);h[p]?h[p].p(g,b):(h[p]=ie(g),h[p].c(),h[p].m(i,u))}for(;p<h.length;p+=1)h[p].d(1);h.length=d.length}},i(v){m||(Ae(f.$$.fragment,v),m=!0)},o(v){Re(f.$$.fragment,v),m=!1},d(v){v&&R(e),Te(h,v),be(f)}}}function st(t,e,r){let{data:n}=e;return t.$$set=s=>{"data"in s&&r(0,n=s.data)},[n]}class lt extends ue{constructor(e){super(),ce(this,e,st,nt,le,{data:0})}}export{lt as component,it as universal};
